<%- include('../templates/head') %>

<body>

	<div class="yuQingContainer">
		<%- include('../templates/header') %>

		<div class="conter subscription monitoring" id="subscriptionMonitor" v-cloak>
			<div class="conter-left">

				<div class="conterLeft-top" style="height: 100%;">
					<div class="comTitleBox flatAngle newInfo">
						<i class="iconfont iconlujing1 incnEdit"></i>
						<div class="modulTitle">
							<i class="iconfont iconzu7"></i>
							最新消息
						</div>
					</div>
					<!-- 最新消息 -->
					<div class="new-msg scroll-container">
						<ul class="sort-list f18">
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
							<li v-for="item in 12">
								<div>
									<span class="suqare f14">1</span>
								</div>
								<div class="content">
									<p class="title">
										<a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
									</p>
									<dl class="dl-info">
										<dt>
											<span class="source">澎湃新闻</span>
										</dt>
										<dd>
											<span class="time">03-03 13:18</span>
										</dd>
									</dl>
								</div>
							</li>
						</ul>
					</div>
				</div>

			</div>

			<div class="conter-middle conter-middle-reset">
				<div class="middle-top">
					<p class="update-range-time">分析周期：最近7天 <i class="iconfont iconlujing1"></i></p>
					<div class="number-total">
						<dl>
							<dt>1688</dt>
							<dd class="f18">声量总和</dd>
						</dl>
						<dl>
							<dt>69</dt>
							<dd class="f18">正面声量</dd>
						</dl>
						<dl>
							<dt>127</dt>
							<dd class="f18">负面声量</dd>
						</dl>
					</div>
				</div>
				<div class="coner-wrap">
					<div class="wrap-top">
						<div class="radiusBox-top">
							<div class="comTitleBox">
								<i class="iconfont iconlujing1 incnEdit"></i>
								<div class="modulTitle">
									<i class="iconfont iconqushi"></i>
									声量趋势
								</div>
							</div>
						</div>
						<div class="body-box" id="overviewLine"></div>
					</div>
					<div class="wrap-bottom">
						<div class="bottom-left">
							<div class="radiusBox-top">
								<div class="comTitleBox flatAngle">
									<!-- <i class="iconfont iconlujing1 incnEdit"></i> -->
									<div class="modulTitle">
										<i class="iconfont iconzu10"></i>
										媒体发布分布
									</div>
								</div>
							</div>
							<div class="body-box ranking scroll-container">
								<table class="ranking-table">
									<tbody class="f18">
										<tr>
											<td>
												人民日报
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-red" style="width: 80%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												湖南日报
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-yellow" style="width: 50%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												华声在线
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-blue" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												南方日报
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												广州日报
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												新华社
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												新华社
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												河北省
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												河北省
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												河北省
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
										<tr>
											<td>
												河北省
											</td>
											<td class="schedule">
												<div class="bar">
													<div class="rank-green" style="width: 30%;">
													</div>
												</div>
												<span>1110</span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="bottom-right">
							<div class="radiusBox-top">
								<div class="comTitleBox flatAngle">
									<i class="iconfont iconlujing1 incnEdit"></i>
									<div class="modulTitle">
										<i class="iconfont iconciyun"></i>
										舆论热词
									</div>
								</div>
							</div>
							<div class="body-box overview-cloud word-cloud" id="overviewCloud"></div>
						</div>
					</div>
				</div>
			</div>

			<div class="conter-right">
				<!-- 来源分布 -->
				<div class="radiusBox-top">

					<div class="comTitleBox ">
						<i class="iconfont iconlujing1 incnEdit"></i>
						<div class="modulTitle">
							<i class="iconfont iconzu5"></i>
							来源分布
						</div>
					</div>
					<div class="body-box" id="overviewPie"></div>
				</div>
				<!-- 发布区域分布 -->
				<div class="radiusBox-bottom">
					<div class="comTitleBox">
						<i class="iconfont iconlujing1 incnEdit"></i>
						<div class="modulTitle">
							<i class="iconfont iconlujing5"></i>
							发布区域分布
						</div>
					</div>
					<div class="body-box ranking scroll-container">
						<table class="ranking-table">
							<tbody class="f18">
								<tr>
									<td>
										人民日报
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-red" style="width: 80%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										湖南日报
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-yellow" style="width: 50%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										华声在线
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-blue" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										南方日报
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										广州日报
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										新华社
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										新华社
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										河北省
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										河北省
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										河北省
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
								<tr>
									<td>
										河北省
									</td>
									<td class="schedule">
										<div class="bar">
											<div class="rank-green" style="width: 30%;">
											</div>
										</div>
										<span>1110</span>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

	<%- include('../templates/foot') %>
</body>

<script>
	//echart基本样式
	var optionStyle = {
		legend: {
			textStyle: {
				color: '#ffffff',
				fontSize: '108%'
			},
			icon: 'path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z',
			itemGap: 30
		},
		tooltip: {
			backgroundColor: 'rgba(164,179,209,1)',
			textStyle: {
				fontSize: '108%',
				color: '#11254D'
			},
			extraCssText: 'box-shadow: 0px 0px 10px rgba(108,132,156,0.5)'
		},
		grid: {
			top: '20%',
			left: '5%',
			right: '5%',
			bottom: '8%',
			containLabel: true
		},
		Axis: {
			boundaryGap: false,
			axisTick: {
				show: true
			},
			axisLine: {
				lineStyle: {
					color: '#98B5F4'
				}
			},
			axisLabel: {
				fontSize: '104%',
				color: '#8DA0C6'
			},
			splitLine: {
				lineStyle: {
					color: '#98B5F4',
					type: 'dashed'
				}
			}
		},
	}
	// 折线图
	function line(id, Obj) {
		// 基于准备好的dom，初始化echarts实例
		var myChart = echarts.init(document.getElementById(id));
		var option = {
			tooltip: {
				trigger: 'axis',
				axisPointer: {
					lineStyle: {
						color: '#98B5F4'
					}
				},
				backgroundColor: optionStyle.tooltip.backgroundColor,
				textStyle: optionStyle.tooltip.textStyle,
				extraCssText: optionStyle.tooltip.extraCssText
			},
			legend: optionStyle.legend,
			grid: optionStyle.grid,
			xAxis: {
				boundaryGap: optionStyle.Axis.boundaryGap,
				axisTick: optionStyle.Axis.axisTick,
				axisLine: optionStyle.Axis.axisLine,
				axisLabel: optionStyle.Axis.axisLabel,
				data: ["02-14", "02-14", "02-14", "02-14", "02-14", "02-14"]
			},
			yAxis: {
				axisTick: optionStyle.Axis.axisTick,
				axisLabel: optionStyle.Axis.axisLabel,
				axisLine: optionStyle.Axis.axisLine,
				splitLine: optionStyle.Axis.splitLine
			},
			series: [{
					name: '微信',
					type: 'line',
					hoverAnimation: false,
					smooth: true,
					symbolSize: 8,
					itemStyle: {
						color: '#44BC86'
					},
					lineStyle: {

					},
					data: [75, 56, 36, 67, 10, 20]
				},
				{
					name: 'APP',
					type: 'line',
					hoverAnimation: false,
					smooth: true,
					symbolSize: 8,
					itemStyle: {
						color: '#F7B930'
					},
					lineStyle: {

					},
					data: [54, 65, 89, 20, 10, 20]
				},
				{
					name: '新闻',
					type: 'line',
					hoverAnimation: false,
					smooth: true,
					symbolSize: 8,
					itemStyle: {
						color: '#5AB0F3'
					},
					lineStyle: {

					},
					data: [120, 20, 36, 56, 10, 20]
				},
				{
					name: '微博',
					type: 'line',
					hoverAnimation: false,
					smooth: true,
					symbolSize: 8,
					itemStyle: {
						color: '#F2476B'
					},
					lineStyle: {

					},
					data: [5, 20, 36, 65, 10, 67]
				}
			]
		};

		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(option);
	}

	
	function pie2(id, fn) {
		var myChart = echarts.init(document.getElementById(id));
		var option = {
			tooltip: {
				trigger: "item",
				formatter: "{a}"
			},
			color: [
				"#44BC86",
				"#F7B930",
				"#F2476B",
				"#5AB0F3",
				"#7C54C4"
			],
			series: [{
				name: "",
				type: "pie",
				radius: ["40%", "70%"], //大小
				center: ["50%", "45%"], // 图表在x y的位置
				label: {
					color: '#fff',
					fontSize: 18,
					formatter: '{b|{b}}\n{d}%',
					rich: {
						b: {
							lineHeight: 24,
							color: '#fff',
							fontSize: 18,
						}
					},
				},
				data: [{
						value: 300,
						name: "微信"
					},
					{
						value: 300,
						name: "APP"
					},
					{
						value: 100,
						name: "新闻"
					},
					{
						value: 100,
						name: "微博"
					},
					{
						value: 100,
						name: "其他"
					},
				],
				labelLine: {
					show: true
				},
			}],
			legend: [{
				orient: "horizontal",
				icon: "path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z",
				left: 'center',
				bottom: 20,
				itemGap: 22,
				textStyle: {
					color: '#fff',
					fontSize: 18,
				},
			}]
		}

		if (fn) {
			fn(option);
			myChart.setOption(option);
			return false;
		}

		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption(option);
	}

	$(function() {

		var vm_Container = new Vue({
			el: '#subscriptionMonitor',
			delimiters: ['${', '}'],
			data() {
				return {
					word: [{
							"name": "武汉加油",
							"value": 1446
						},
						{
							"name": "野生动物",
							"value": 928
						},
						{
							"name": "境外疫情",
							"value": 906
						},
						{
							"name": "新增病历",
							"value": 825
						},
						{
							"name": "武汉加油",
							"value": 15
						},
						{
							"name": "野生动物",
							"value": 10
						},
						{
							"name": "境外疫情",
							"value": 60
						},
						{
							"name": "新增病历",
							"value": 22
						},
						{
							"name": "武汉加油",
							"value": 15
						},
						{
							"name": "野生动物",
							"value": 10
						},
						{
							"name": "境外疫情",
							"value": 60
						},
						{
							"name": "境外疫情",
							"value": 60
						},
						{
							"name": "新增病历",
							"value": 22
						},
						{
							"name": "武汉加油",
							"value": 15
						},
					
					],
				}
			},
			methods: {
				init() {
					line("overviewLine") // 折线
					this.source(); // 来源分布
					this.initWorldCloud();
				},
				source() {
					var data = [{
							value: 300,
							name: "微信"
						},
						{
							value: 300,
							name: "APP"
						},
						{
							value: 100,
							name: "新闻"
						},
						{
							value: 100,
							name: "微博"
						},
					];
					pie2('overviewPie');
				},
				initWorldCloud() {
				
					var myChart = echarts.init(document.getElementById('overviewCloud'));
					var wordCloudList = this.word;
				
					var option = {
						tooltip: {
							show: true
						},
						series: [{
							type: 'wordCloud', //类型为字符云
							//shape: 'triangle', //平滑
							// size: ['50%', '50%'],
							left: 'center',// 居中
							width: '100%', //图像宽高
							height: '100%', //图像宽高
							gridSize: 10, //词与词之间的距离
							sizeRange: [12, 32],// 字体大小范围
							rotationRange: [0, 90],// 旋转的角度范围
							rotationStep: 90,// 每次旋转的角度步数
							drawOutOfBound: false, //设置为true以允许部分在画布外部绘制单词。允许字号大于要绘制的画布大小
							textStyle: {
								normal: {
									fontFamily: 'sans-serif',
									color: function() {
										var colors = ['#71DEBF', '#04C6D5'];
										return colors[parseInt(Math.random() * 2)];
									}
								},
								emphasis: {
									shadowBlur: 5, //阴影距离
									shadowColor: '#333' //阴影颜色
								}
							},
							data: wordCloudList,
						}]
					};
				
				
				
					var maskImage = new Image();
					maskImage.src = "../images/bgworld.png"
					maskImage.onload = function() {
						option.series[0].maskImage = maskImage;
						myChart.setOption(option)
					}
				
				},
			},
			mounted() {
				this.init();
			}
		})


	})
</script>

</html>
