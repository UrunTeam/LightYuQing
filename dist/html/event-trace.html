<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>事件跟踪 - ejs-demo</title>
<meta name="renderer" content="webkit">

<link rel="stylesheet" href="http://at.alicdn.com/t/font_1684931_9d5u7tfi0a.css">
<link rel="stylesheet" href="../libs/ElementUI/index.css">
<link rel="stylesheet" href="../css/global.css">
<link rel="stylesheet" href="../css/xgh.css">

<link rel="stylesheet" href="../css/lxm.css">


<!--[if lt IE 9]>
  <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<body>

  <div class="yuQingContainer">
    <div id="app">
<nav>
        <div class="container">
            <div class="navbar-header flexBetween">
                <div class="navbar-title flexStatr">
                    <div class="navbarIcon" @click='showNav=!showNav'>图</div>
                    <span class="navbar-line"></span>
                    <h2>${pageDetail.name}</h2>
                    <div class="seachInput" v-if='pageDetail.seachInput'>dfsadfasdf</div>
                </div>
                <div class="navbar-right flexAround">
                        <div class="navbar-time">
                            ${year}年${month}月${day}日 
                            <span class="timer-week">${Week}</span> 
                            <span class="time-hours">${hours+':'+minutes+":"+seconds}</span>
                        </div>
                        <div class="navbar-user flexAround">
                            <img src="#" alt="" class="userImg">
                             paul Sadler
                        </div>
                        <!-- 数据整理 -->
                        <div class="navbar-Ordenar rightIcon" @click='pageDetail.ordenar=!pageDetail.ordenar'>
                            <div class="topTooltip">数据整理</div>
                            整
                        </div> 
                        <div class="navbar-setting rightIcon"  @click='pageDetail.setting=!pageDetail.setting'>
                            <div class="topTooltip">基础设置</div>
                            设
                        </div> 
                        <div class="navbar-signOut rightIcon"  @click='signOut'>
                            <div class="topTooltip">退出登录</div>
                            退
                        </div> 
                </div>
            </div>
        </div>
    </nav>
    <div id='navbar-right' v-show='showNav'>
            <div class="container">
               <ul class="navbar-ul">
                   <li v-for='(item,index) in pageArr' :key='index'  :class="item.active?'active':''">
                       <span :class="item.icon"></span>
                       <!-- ${item.name} --> 图
                    </li>
               </ul>
               <ul class="navbar-big">
                   <li v-for='(item,index) in pageArr' :key='index' @click='checkActive(item,index)'  :class="item.active?'active':''">
                        <span :class="item.icon">图</span>
                        <br>   
                        ${item.name.slice(0,4)}
                    </li>
               </ul>
               
            </div>
        </div>
    </div>


    <div class="conter" id="vm_Container" v-cloak>
      <div class="conter-left">

        <div class="conterLeft-top" style="height: 100%;">
          <div class="comTitleBox flatAngle">
            <i class="iconfont iconlujing1 incnEdit"></i>
            <div class="modulTitle flex-sbw">
              <i class="iconfont iconzu7"></i>
              <div style="float: left;">
                <el-button :type="CurrentTab==1?'warning':'none'" @click="CurrentTab=1">传播消息</el-button>
                <el-button :type="CurrentTab==2?'warning':'none'" @click="CurrentTab=2">最新消息</el-button>
              </div>
            </div>
          </div>
          <!-- 传播信息 -->
          <div class="trans scroll-container" v-show="CurrentTab==1">
            <ul class="dot-line-list f18">
              <li class="active">
                <p class="title">
                  <a href="javascript:;">疫情防护战：湖南设计院紧急驰援湘潭防护服生产厂建设工作</a>
                </p>
                <dl class="dl-info">
                  <dt>
                    <span class="source">澎湃新闻</span>
                    <span class="time">03-03 13:18</span>
                  </dt>
                  <dd>
                    <span class="read-status">已读<i class=""></i></span>
                  </dd>
                </dl>
              </li>
              <li v-for="item in 14">
                <p class="title">
                  <a href="javascript:;">疫情防护战：湖南设计院紧急驰援湘潭防护服生产厂建设工作</a>
                </p>
                <dl class="dl-info">
                  <dt>
                    <span class="source">澎湃新闻</span>
                    <span class="time">03-03 13:18</span>
                  </dt>
                  <dd>
                    <span class="read-status no-read"><i class="iconfont iconlujing6"></i>未读</span>
                  </dd>
                </dl>
              </li>
            </ul>
          </div>

          <!-- 最新消息 -->
          <div class="new-msg scroll-container" v-show="CurrentTab==2">
            <ul class="sort-list f18">
              <li v-for="item in 12">
                <div>
                  <span class="suqare f14">1</span>
                </div>
                <div class="content">
                  <p class="title">
                    <a href="javascript:;">王忠林主持召开市防控指挥部视频会议 保持定力 慎终如始 统筹做好疫情防控各项工作</a>
                  </p>
                  <dl class="dl-info">
                    <dt>
                      <span class="source">澎湃新闻</span>
                    </dt>
                    <dd>
                      <span class="time">03-03 13:18</span>
                    </dd>
                  </dl>
                </div>
              </li>
            </ul>
          </div>
        </div>

      </div>

      <div class="conter-middle conter-middle-reset">
        <div class="middle-top">
          <p class="update-range-time">分析周期：2020-2-24 10:00 至 2020-3-3 14:00 <i class="iconfont iconlujing1"></i></p>
          <div class="number-total">
            <dl>
              <dt>1688</dt>
              <dd class="f18">声量总和</dd>
            </dl>
            <dl>
              <dt>69</dt>
              <dd class="f18">正面声量</dd>
            </dl>
            <dl>
              <dt>127</dt>
              <dd class="f18">负面声量</dd>
            </dl>
          </div>
        </div>
        <div class="coner-wrap">
          <div class="wrap-top">
            <div class="radiusBox-top">
              <div class="comTitleBox">
                <i class="iconfont iconlujing1 incnEdit"></i>
                <div class="modulTitle">
                  <i class="iconfont iconqushi"></i>
                  声量趋势
                </div>
              </div>
            </div>
            <div class="body-box" id="js_sound"></div>
          </div>
          <div class="wrap-bottom">
            <div class="bottom-left">
              <div class="radiusBox-top">
                <div class="comTitleBox flatAngle">
                  <!-- <i class="iconfont iconlujing1 incnEdit"></i> -->
                  <div class="modulTitle">
                    <i class="iconfont iconredianguanzhu"></i>
                    区域排行
                  </div>
                </div>
              </div>
              <div class="body-box ranking scroll-container">
                <table class="ranking-table">
                  <tbody class="f18">
                    <tr>
                      <td>
                        湖南省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-red" style="width: 80%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-yellow" style="width: 50%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-blue" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        河北省
                      </td>
                      <td class="schedule">
                        <div class="bar">
                          <div class="rank-green" style="width: 30%;">
                          </div>
                        </div>
                        <span>1110</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="bottom-right">
              <div class="radiusBox-top">
                <div class="comTitleBox flatAngle">
                  <i class="iconfont iconlujing1 incnEdit"></i>
                  <div class="modulTitle">
                    <i class="iconfont iconciyun"></i>
                    舆论热词
                  </div>
                </div>
              </div>
              <div class="body-box" id="js_wordClouds"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="conter-right">
        <!-- 情绪分布 -->
        <div class="radiusBox-top">

          <div class="comTitleBox ">
            <i class="iconfont iconlujing1 incnEdit"></i>
            <div class="modulTitle">
              <i class="iconfont iconzu5"></i>
              来源分布
            </div>
          </div>
          <div class="body-box" id="js_source"></div>
        </div>
        <!-- 舆论热词 -->
        <div class="radiusBox-bottom">
          <div class="comTitleBox">
            <i class="iconfont iconlujing1 incnEdit"></i>
            <div class="modulTitle">
              <i class="iconfont iconciyun"></i>
              舆论热词
            </div>
          </div>
          <div class="body-box" id="js_mood"></div>
        </div>
      </div>
    </div>
  </div>
  </div>

  
<script src="../libs/jquery/jquery.min.js"></script>
<script src="../libs/echarts/echarts.min.js"></script>
<script src="../libs/echarts/echarts-wordcloud.min.js"></script>
<script src="../js/resize.js"></script>
<script src="../js/vue.js"></script>
<script src="../libs/ElementUI/index.js"></script>
<script src="../js/global.js"></script>

<script src="../js/chartsMap.js"></script>


</body>
<script>
  console.log(vm_yuqing.$data)
  vm_yuqing.$data.pageDetail = {name:'事件跟踪',url:'event-trace.html',active:false,ordenar:false,setting:false,seachInput:true,icon:'1'};
  
  //echart基本样式
  var optionStyle = {
    legend: {
      textStyle: {
        color: '#ffffff',
        fontSize: '108%'
      },
      icon: 'path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z',
      itemGap: 30
    },
    tooltip: {
      backgroundColor: 'rgba(164,179,209,1)',
      textStyle: {
        fontSize: '108%',
        color: '#11254D'
      },
      extraCssText: 'box-shadow: 0px 0px 10px rgba(108,132,156,0.5)'
    },
    grid: {
      top: '20%',
      left: '5%',
      right: '5%',
      bottom: '8%',
      containLabel: true
    },
    Axis: {
      boundaryGap: false,
      axisTick: {
        show: true
      },
      axisLine: {
        lineStyle: {
          color: '#98B5F4'
        }
      },
      axisLabel: {
        fontSize: '104%',
        color: '#8DA0C6'
      },
      splitLine: {
        lineStyle: {
          color: '#98B5F4',
          type: 'dashed'
        }
      }
    },
  }
  // 折线图
  function line(id, Obj) {
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById(id));
    var option = {
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          lineStyle: {
            color: '#98B5F4'
          }
        },
        backgroundColor: optionStyle.tooltip.backgroundColor,
        textStyle: optionStyle.tooltip.textStyle,
        extraCssText: optionStyle.tooltip.extraCssText
      },
      legend: optionStyle.legend,
      grid: optionStyle.grid,
      xAxis: {
        boundaryGap: optionStyle.Axis.boundaryGap,
        axisTick: optionStyle.Axis.axisTick,
        axisLine: optionStyle.Axis.axisLine,
        axisLabel: optionStyle.Axis.axisLabel,
        data: ["02-14", "02-14", "02-14", "02-14", "02-14", "02-14"]
      },
      yAxis: {
        axisTick: optionStyle.Axis.axisTick,
        axisLabel: optionStyle.Axis.axisLabel,
        axisLine: optionStyle.Axis.axisLine,
        splitLine: optionStyle.Axis.splitLine
      },
      series: [{
        name: '微信',
        type: 'line',
        hoverAnimation: false,
        smooth: true,
        symbolSize: 8,
        itemStyle: {
          color: '#44BC86'
        },
        lineStyle: {

        },
        data: [75, 56, 36, 67, 10, 20]
      },
      {
        name: 'APP',
        type: 'line',
        hoverAnimation: false,
        smooth: true,
        symbolSize: 8,
        itemStyle: {
          color: '#F7B930'
        },
        lineStyle: {

        },
        data: [54, 65, 89, 20, 10, 20]
      },
      {
        name: '新闻',
        type: 'line',
        hoverAnimation: false,
        smooth: true,
        symbolSize: 8,
        itemStyle: {
          color: '#5AB0F3'
        },
        lineStyle: {

        },
        data: [120, 20, 36, 56, 10, 20]
      },
      {
        name: '微博',
        type: 'line',
        hoverAnimation: false,
        smooth: true,
        symbolSize: 8,
        itemStyle: {
          color: '#F2476B'
        },
        lineStyle: {

        },
        data: [5, 20, 36, 65, 10, 67]
      }
      ]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
  }

  function pie(id, data) {
    var myChart = echarts.init(document.getElementById(id));
    var option = {
      tooltip: {
        trigger: "item",
        formatter: "{a}"
      },
      color: [
        "#F7B930",
        "#F2476B",
        "#5AB0F3",
      ],
      series: [
        {
          name: "",
          type: "pie",
          radius: ["40%", "70%"], //大小
          center: ["52%", "55%"], // 图表在x y的位置
          label: {
            color: '#fff',
            fontSize: 18,
            formatter: '{b|{b}}\n{d}%',
            rich: {
              b: {
                lineHeight: 24,
                color: '#fff',
                fontSize: 18,
              }
            },
          },
          data: data,
          labelLine: {
            show: true
          },
        }
      ],
      legend: [
        {
          orient: "vertical",
          icon: "path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z",
          left: 20,
          top: 40,
          itemGap: 22,
          textStyle: {
            color: '#fff',
            fontSize: 18,
          },
        }
      ]
    }

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
  }

  function pie2(id, fn) {
    var myChart = echarts.init(document.getElementById(id));
    var option = {
      tooltip: {
        trigger: "item",
        formatter: "{a}"
      },
      color: [
        "#44BC86",
        "#F7B930",
        "#F2476B",
        "#5AB0F3",
        "#7C54C4"
      ],
      series: [
        {
          name: "",
          type: "pie",
          radius: ["40%", "70%"], //大小
          center: ["50%", "45%"], // 图表在x y的位置
          label: {
            color: '#fff',
            fontSize: 18,
            formatter: '{b|{b}}\n{d}%',
            rich: {
              b: {
                lineHeight: 24,
                color: '#fff',
                fontSize: 18,
              }
            },
          },
          data: [
            { value: 300, name: "微信" },
            { value: 300, name: "APP" },
            { value: 100, name: "新闻" },
            { value: 100, name: "微博" },
            { value: 100, name: "其他" },
          ],
          labelLine: {
            show: true
          },
        }
      ],
      legend: [
        {
          orient: "horizontal",
          icon: "path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z",
          left: 'center',
          bottom: 20,
          itemGap: 22,
          textStyle: {
            color: '#fff',
            fontSize: 18,
          },
        }
      ]
    }

    if (fn) {
      fn(option);
      myChart.setOption(option);
      return false;
    }

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
  }

  function wordClouds(id, wordCloudList) {
    var myChart = echarts.init(document.getElementById(id));

    var option = {
      tooltip: {
        show: true
      },
      series: [{
        type: 'wordCloud', //类型为字符云
        //shape: 'triangle', //平滑
        // size: ['50%', '50%'],
        left: 'center',// 居中
        width: '100%', //图像宽高
        height: '100%', //图像宽高
        gridSize: 10, //词与词之间的距离
        sizeRange: [12, 32],// 字体大小范围
        rotationRange: [0, 90],// 旋转的角度范围
        rotationStep: 90,// 每次旋转的角度步数
        drawOutOfBound: false, //设置为true以允许部分在画布外部绘制单词。允许字号大于要绘制的画布大小
        textStyle: {
          normal: {
            fontFamily: 'sans-serif',
            color: function () {
              var colors = ['#71DEBF', '#04C6D5'];
              return colors[parseInt(Math.random() * 2)];
            }
          },
          emphasis: {
            shadowBlur: 5, //阴影距离
            shadowColor: '#333' //阴影颜色
          }
        },
        data: wordCloudList,
      }]
    };



    var maskImage = new Image();
    maskImage.src = "../images/bgworld.png"
    maskImage.onload = function () {
      console.log(option)
      option.series[0].maskImage = maskImage;
      myChart.setOption(option)
    }
  }
  
  $(function () {

    var vm_Container = new Vue({
      el: '#vm_Container',
      delimiters: ['${', '}'],
      data() {
        return {
          CurrentTab: 1
        }
      },
      methods: {
        init() {
          this.sound();
          this.source(); // 来源分布
          this.mood();
          this.yulunword();

        },
        sound() {
          var data = [
            { value: 300, name: "中立" },
            { value: 300, name: "负面" },
            { value: 100, name: "正面" },
          ];
          line('js_sound', data);
        },
        source() {
          var data = [
            { value: 300, name: "微信" },
            { value: 300, name: "APP" },
            { value: 100, name: "新闻" },
            { value: 100, name: "微博" },
          ];
          pie2('js_source');
        },
        mood() {
          var data = [
            { value: 300, name: "中立" },
            { value: 300, name: "负面" },
            { value: 100, name: "正面" },
          ];
          pie('js_mood', data)
        },

        yulunword() {
          var data = [{
            "name": "武汉加油",
            "value": 1446
          },
          {
            "name": "野生动物",
            "value": 928
          },
          {
            "name": "境外疫情",
            "value": 906
          },
          {
            "name": "新增病历",
            "value": 825
          },
          {
            "name": "武汉加油",
            "value": 15
          },
          {
            "name": "野生动物",
            "value": 10
          },
          {
            "name": "境外疫情",
            "value": 60
          },
          {
            "name": "新增病历",
            "value": 22
          },
          {
            "name": "武汉加油",
            "value": 15
          },
          {
            "name": "野生动物",
            "value": 10
          },
          {
            "name": "境外疫情",
            "value": 60
          },
          {
            "name": "境外疫情",
            "value": 60
          },
          {
            "name": "新增病历",
            "value": 22
          },
          {
            "name": "武汉加油",
            "value": 15
          }];
          wordClouds('js_wordClouds', data)
        }
      },
      mounted() {
        this.init();
      }
    })


  })

</script>

</html>