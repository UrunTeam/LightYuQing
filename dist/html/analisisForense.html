<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>属地舆情研判 - ejs-demo</title>
<meta name="renderer" content="webkit">

<link rel="stylesheet" href="http://at.alicdn.com/t/font_1684931_9d5u7tfi0a.css">
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<link rel="stylesheet" href="../css/global.css">
<link rel="stylesheet" href="../css/analisisForense.css">


<!--[if lt IE 9]>
  <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>


<body>

    <div class="yuQingContainer">
        <!-- 头部 -->
        <div id="app">
<nav>
        <div class="container">
            <div class="navbar-header flexBetween">
                <div class="navbar-title flexStatr">
                    <div class="navbarIcon" @click='showNav=!showNav'>图</div>
                    <span class="navbar-line"></span>
                    <h2>${pageDetail.name}</h2>
                    <div class="seachInput" v-if='pageDetail.seachInput'>dfsadfasdf</div>
                </div>
                <div class="navbar-right flexAround">
                        <div class="navbar-time">
                            ${year}年${month}月${day}日 
                            <span class="timer-week">${Week}</span> 
                            <span class="time-hours">${hours+':'+minutes+":"+seconds}</span>
                        </div>
                        <div class="navbar-user flexAround">
                            <img src="#" alt="" class="userImg">
                             paul Sadler
                        </div>
                        <!-- 数据整理 -->
                        <div class="navbar-Ordenar rightIcon" @click='pageDetail.ordenar=!pageDetail.ordenar'>
                            <div class="topTooltip">数据整理</div>
                            整
                        </div> 
                        <div class="navbar-setting rightIcon"  @click='pageDetail.setting=!pageDetail.setting'>
                            <div class="topTooltip">基础设置</div>
                            设
                        </div> 
                        <div class="navbar-signOut rightIcon"  @click='signOut'>
                            <div class="topTooltip">退出登录</div>
                            退
                        </div> 
                </div>
            </div>
        </div>
    </nav>
    <div id='navbar-right' v-show='showNav'>
            <div class="container">
               <ul class="navbar-ul">
                   <li v-for='(item,index) in pageArr' :key='index'  :class="item.active?'active':''">
                       <span :class="item.icon"></span>
                       <!-- ${item.name} --> 图
                    </li>
               </ul>
               <ul class="navbar-big">
                   <li v-for='(item,index) in pageArr' :key='index' @click='checkActive(item,index)'  :class="item.active?'active':''">
                        <span :class="item.icon">图</span>
                        <br>   
                        ${item.name.slice(0,4)}
                    </li>
               </ul>
               
            </div>
        </div>
    </div>

        <div id='analisisForense' class="conter">
            <div class="conter-left">
                <!-- 声量趋势 -->
                <div class="conterLeft-top">
                    <div class="comTitleBox flatAngle">
                        <i class="iconfont iconlujing1 incnEdit"></i>
                        <div class="modulTitle">
                            <i class="iconfont iconqushi"></i>
                            声量趋势
                        </div>
                    </div>
                    <div id="trendChart" ref='trendChart'></div>
                </div>
                <!-- 湖南热点 -->
                <div class="conterLeft-bottom ">
                    <div class="flatAngle comTitleBox">
                        <i class="iconfont iconlujing1 incnEdit"></i>
                        <div class="modulTitle">
                            <i class="iconfont iconredianguanzhu"></i>
                            湖南热点
                        </div>
                    </div>
                    <div class="conterLeft-bottom-item">
                        <ul class="scroll-container">
                            <li class="sort-list flexStart" v-for='(item,index) in hostArr' :key='index'>
                                <span class="hostSort" :class="index>2?'number':'sort'+index+' img'">
                                    ${index>2?index+1:''}
                                </span>
                                <div class="sortConter flexBetween">
                                    <p class="sortConter-top">
                                        ${item.title}
                                    </p>
                                    <div class="sortConter-bottom flexBetween">
                                        <div class="host-media">
                                            <span>${item.media}</span>
                                            <span>${item.date}</span>
                                        </div>
                                        <div class="sortConter-host">
                                            <i class="iconfont iconredianguanzhu"></i>
                                            ${item.host}
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="conter-middle">
                <div class="comTitleBox flexBetween">
                    <i class="iconfont iconlujing1 incnEdit"></i>
                    <div class="modulTitle">
                        <i class="iconfont iconzu8"></i>
                        属地舆情研判
                    </div>
                    <div class="comTitleItem flexStart">
                        <span class="comTitleText">分析时间：</span>
                        <ul class="flexStart">
                            <li v-for='(item,index) in timeArr' @click='changeTime(item,index)'
                                :class="item.active?'active':''" :key='index'>
                                ${item.name}
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="number-total">
                    <dl v-for="(item,index) in analisisArr" :key='index'>
                        <dt>${item.host}</dt>
                        <dd class="f18">${item.name}</dd>
                    </dl>
                </div>
            </div>
            <div class="conter-right">
                <!-- 情绪分布 -->
                <div class="radiusBox-top">

                    <div class="comTitleBox ">
                        <i class="iconfont iconlujing1 incnEdit"></i>
                        <div class="modulTitle">
                            <i class="iconfont iconxiaolian"></i>
                            情绪分布
                        </div>
                    </div>
                    <div id="pieChart" ref='pieChart'>
                        fsdfsdf
                    </div>
                </div>
                <!-- 舆论热词 -->
                <div class="radiusBox-bottom">
                    <div class="comTitleBox">
                        <i class="iconfont iconlujing1 incnEdit"></i>
                        <div class="modulTitle">
                            <i class="iconfont iconciyun"></i>
                            舆论热词
                        </div>
                    </div>

                </div>
            </div>



        </div>
        
<script src="../libs/jquery/jquery.min.js"></script>
<script src="../libs/echarts/echarts.min.js"></script>
<script src="../js/resize.js"></script>
<script src="../js/vue.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="../js/global.js"></script>


    </div>

</body>
<script>
    function initAnalisisForense() {
        var analisisForense = new Vue({
            el: '#analisisForense',
            delimiters: ['${', '}'],
            data() {
                return {
                    // 湖南热点数据

                    hostArr: Array(50).fill({ title: '钟南山为何说有信息4月底基本控制疫情？这份研究给了答案', media: '澎湃新闻', host: 3658, date: '03-03 13:18' }),
                    // 属地舆情研判数据
                    analisisArr: [{ name: '声量总和', host: 1655 }, { name: '正面声量', host: 1655 }, { name: '负面声量', host: 1655 }, { name: '预警声量', host: 1655 }],
                    timeArr: [{ name: '24小时', active: false }, { name: '7天', active: true }, { name: '15天', active: false }, { name: '30天', active: false },],
                    // 情绪分布饼图图表
                    pieChart: {
                        option: {
                            tooltip: {
                                trigger: "item",
                                formatter: "{a}"
                            },
                            color: [
                                "#F7B930",
                                "#F2476B",
                                "#5AB0F3",
                            ],
                            series: [
                                {
                                    name: "",
                                    type: "pie",
                                    radius: ["40%", "70%"], //大小
                                    center: ["52%", "55%"], // 图表在x y的位置
                                    label: {
                                        color: '#fff',
                                        fontSize: 18,
                                        formatter: '{b|{b}}\n{d}%',
                                        rich: {
                                            b: {
                                                lineHeight: 24,
                                                color: '#fff',
                                                fontSize: 18,
                                            }
                                        },
                                    },
                                    data: [],
                                    labelLine: {
                                        show: true
                                    },
                                }
                            ],
                            legend: [
                                {
                                    orient: "vertical",
                                    icon: "path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z",
                                    left: 20,
                                    top: 40,
                                    itemGap: 22,
                                    textStyle: {
                                        color: '#fff',
                                        fontSize: 18,
                                    },
                                }
                            ]
                        },
                        eachart: null,
                        $el: null
                    },
                    // 声量趋势图表数据
                    trendChart: {
                        option: {
                            tooltip: {
                                trigger: 'axis',
                                axisPointer: {
                                    lineStyle: {
                                        color: '#98B5F4'
                                    }
                                },
                                backgroundColor: 'rgba(164,179,209,1)',
                                textStyle: {
                                    fontSize: '108%',
                                    color: '#11254D'
                                },
                                extraCssText: 'box-shadow: 0px 0px 10px rgba(108,132,156,0.5)'
                            },
                            legend: {
                                textStyle: {
                                    color: '#ffffff',
                                    fontSize: '108%'
                                },
                                icon: 'path://m43.75,145.74l0,0c0,-51.64 41.86,-93.5 93.5,-93.5l0,0c24.8,0 48.58,9.85 66.11,27.38c17.53,17.53 27.38,41.32 27.38,66.11l0,0c0,51.64 -41.86,93.5 -93.5,93.5l0,0c-51.64,0 -93.5,-41.86 -93.5,-93.5zm46.75,0l0,0c0,25.82 20.93,46.75 46.75,46.75c25.82,0 46.75,-20.93 46.75,-46.75c0,-25.82 -20.93,-46.75 -46.75,-46.75l0,0c-25.82,0 -46.75,20.93 -46.75,46.75z',
                                itemGap: 30,
                                right: 10,
                                top: 4,
                            },
                            grid: {
                                top: '20%',
                                left: '5%',
                                right: '5%',
                                bottom: '8%',
                                containLabel: true
                            },
                            xAxis: {
                                boundaryGap: false,
                                axisTick: {
                                    show: true
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: '#98B5F4'
                                    }
                                },
                                axisLabel: {
                                    fontSize: '104%',
                                    color: '#8DA0C6'
                                },
                                data: ["02-14", "02-14", "02-14", "02-14", "02-14", "02-14"]
                            },
                            yAxis: {
                                axisTick: {
                                    show: true
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: '#98B5F4'
                                    }
                                },
                                axisLabel: {
                                    fontSize: '104%',
                                    color: '#8DA0C6'
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: '#98B5F4',
                                        type: 'dashed'
                                    }
                                }
                            },
                            series: [{
                                name: '',
                                type: 'line',
                                hoverAnimation: false,
                                smooth: true,
                                symbolSize: 8,
                                itemStyle: {
                                    color: '#44BC86'
                                },
                                lineStyle: {

                                },
                                data: []
                            },
                            {
                                name: '',
                                type: 'line',
                                hoverAnimation: false,
                                smooth: true,
                                symbolSize: 8,
                                itemStyle: {
                                    color: '#F7B930'
                                },
                                lineStyle: {

                                },
                                data: []
                            },
                            {
                                name: '',
                                type: 'line',
                                hoverAnimation: false,
                                smooth: true,
                                symbolSize: 8,
                                itemStyle: {
                                    color: '#5AB0F3'
                                },
                                lineStyle: {

                                },
                                data: []
                            },
                            {
                                name: '',
                                type: 'line',
                                hoverAnimation: false,
                                smooth: true,
                                symbolSize: 8,
                                itemStyle: {
                                    color: '#F2476B'
                                },
                                lineStyle: {

                                },
                                data: []
                            }
                            ]
                        },
                        eachart: null,
                        $el: null
                    },
                    eachartNameList: ['pieChart', 'trendChart',],
                };
            },
            created() {
            },
            mounted() {
                this.initEachDom();
                this.initPieChart()
                this.initTrendChart()
            },
            methods: {
                initEachDom() {
                    let that = this;
                    that.eachartNameList.map((item, index) => {
                        that[item].$el = that.$refs[item];
                        that[item].eachart = echarts.init(that[item].$el);
                    });
                },
                changeTime(item, index) {
                    this.timeArr.map(function (item, index) {
                        item.active = false
                    })
                    this.timeArr[index].active = true
                },
                // 实例化(更新)图表
                updateEach(name) {
                    this[name].eachart.setOption(this[name].option);
                },
                initPieChart() {
                    let dataList = [
                        { value: 300, name: "中立" },
                        { value: 300, name: "负面" },
                        { value: 100, name: "正面" },
                    ];
                    this.pieChart.option.series[0].data = dataList;
                    this.updateEach("pieChart");
                },
                initTrendChart() {
                    let arr=[{name:'微信',data:[75, 56, 36, 67, 10, 20]},
                             {name:'APP',data:[54, 65, 89, 20, 10, 20]},
                             {name:'新闻',data:[120, 20, 36, 56, 10, 20]},
                             {name:'微博',data:[5, 20, 36, 65, 10, 67]},
                            ]
                    this.trendChart.option.series.map(function(item,index){
                        item.name=arr[index].name
                        item.data=arr[index].data
                    })
                    this.updateEach("trendChart");
                }



            }
        });
    }
    function init() {
        initAnalisisForense()
    }
    init()
</script>

</html>